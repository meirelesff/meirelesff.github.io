<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>deflatebr | Fernando Meireles</title>
    <link>https://www.femeireles.com/categoria/deflatebr/</link>
      <atom:link href="https://www.femeireles.com/categoria/deflatebr/index.xml" rel="self" type="application/rss+xml" />
    <description>deflatebr</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>pt</language><lastBuildDate>Sun, 30 Sep 2018 00:00:00 +0000</lastBuildDate>
    <image>
      <url>https://www.femeireles.com/media/icon_hu3e0553bc4b68601f95bc1fbd126c0e2d_24811_512x512_fill_lanczos_center_2.png</url>
      <title>deflatebr</title>
      <link>https://www.femeireles.com/categoria/deflatebr/</link>
    </image>
    
    <item>
      <title>Deflacionando séries com o deflateBR</title>
      <link>https://www.femeireles.com/post/rstats/deflacionar-series-no-r-deflatebr/</link>
      <pubDate>Sun, 30 Sep 2018 00:00:00 +0000</pubDate>
      <guid>https://www.femeireles.com/post/rstats/deflacionar-series-no-r-deflatebr/</guid>
      <description>&lt;p&gt;Deflacionar séries é pré-requisito em qualquer análise sobre o valor do
dinheiro ao longo do tempo. E embora não seja algo complexo, isso
envolve várias etapas que consomem tempo, todas sujeitas a erro humano:
obter dados históricos de algum índice de preços; compatibilizar as
datas da série nominal que se quer corrigir com a série do índice de
preços; calcular o ajuste; refazer o processo caso seja necessário usar
outro índice de preços. Em suma, deflacionar séries acaba sempre tomando
mais tempo do que deveria.&lt;/p&gt;
&lt;p&gt;Para realizar essa tarefa de uma forma mais rápida e replicável, usando
cinco dos índices de preços mais populares no Brasil, criei um pacote
para &lt;code&gt;R&lt;/code&gt;: o &lt;code&gt;deflateBR&lt;/code&gt;. A partir de uma série de reais nominais, ele
obtém as séries de índices de preços atualizadas diretamente da API do
IPEA e, em segundos, retorna os valores corrigidos – usando a
metodologia adotada pelo &lt;a href=&#34;https://www3.bcb.gov.br/CALCIDADAO/publico/metodologiaCorrigirIndice.do?method=metodologiaCorrigirIndice&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Banco
Central&lt;/a&gt;.
Segue um breve descrição do pacote.&lt;/p&gt;
&lt;h3 id=&#34;como-funciona-o-deflatebr&#34;&gt;Como funciona o deflateBR?&lt;/h3&gt;
&lt;p&gt;O &lt;code&gt;deflateBR&lt;/code&gt; automatiza três processos para deflacionar uma série.
Primeiro, ele extrai dados de um dos seguintes índices de preços da API
do IPEA: IPCA e INPC, desenvolvidos pelo IBGE; e IGP-M, IGP-DI e IPC,
desenvolvidos pela FGV. Segundo, ele compatibiliza as datas mensais
desses índices com as datas dos valores nominais da série. Feito isso,
enfim, ele deflaciona e retorna os valores corrigidos.&lt;/p&gt;
&lt;p&gt;A função principal do pacote, &lt;code&gt;deflate&lt;/code&gt;, requer apenas três argumentos:
um vetor numérico de valores nominais; um vetor com as datas nominais; e
uma data de referência no formato MM/AAAA. Um exemplo usando o IPCA:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;# Carrega o pacote
library(deflateBR)

# Deflaciona 100 reais de janeiro de 2000
deflate(nominal_values = 100, nominal_dates = as.Date(&amp;quot;2000-01-01&amp;quot;), real_date = &amp;quot;01/2018&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
## Downloading necessary data from IPEA&#39;s API
## ...

## [1] 310.3893
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Por padrão, a função &lt;code&gt;deflate&lt;/code&gt; esse índice. Podemos alterar isso com
outro argumento chamado &lt;code&gt;index&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;deflate(100, as.Date(&amp;quot;2000-01-01&amp;quot;), &amp;quot;01/2018&amp;quot;, index = &amp;quot;igpm&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
## Downloading necessary data from IPEA&#39;s API
## ...

## [1] 372.1672
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Passando o valor &lt;code&gt;igpm&lt;/code&gt; para o argumento, a função usa o IGP-M como
indexador. Os demais indexadores possíveis são: &lt;code&gt;ipc&lt;/code&gt; para o IPC;
&lt;code&gt;igpdi&lt;/code&gt; para o IGP-DI; &lt;code&gt;inpc&lt;/code&gt; para o INPC. Para sabermos 100 reais de
janeiro de 1995 valeriam hoje segundo esse último, bastaria usar:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;deflate(100, as.Date(&amp;quot;1995-01-01&amp;quot;), &amp;quot;01/2018&amp;quot;, &amp;quot;inpc&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
## Downloading necessary data from IPEA&#39;s API
## ...

## [1] 491.0543
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;deflacionando-séries-maiores&#34;&gt;Deflacionando séries maiores&lt;/h3&gt;
&lt;p&gt;Mais útil do que corrigir um único valor é corrigir séries inteiras, com
várias quantias em reais nominais associadas a algum período específico.
Para mostrar como a função &lt;code&gt;deflate&lt;/code&gt; faz isso, podemos criar os seguinte
&lt;code&gt;data.frame&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;dados &amp;lt;- data.frame(reais = seq(1, 5),
                    datas = seq.Date(from = as.Date(&amp;quot;2001-01-01&amp;quot;), by = &amp;quot;month&amp;quot;, length.out = 5),
                    stringsAsFactors = FALSE
                     )
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Feito isso, temos agora dados fictícios, com valores de 1 a 5 observados
desde janeiro até maio de 2001. Suponha que queremos deflacionar esses
valores para janeiro de 2017 usando o IPC da FGV. Como fazer isso?
Apenas mudando o jeito de passar as informações necessárias para a
função &lt;code&gt;deflate&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;deflate(dados$reais, dados$datas, &amp;quot;01/2017&amp;quot;, &amp;quot;ipc&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
## Downloading necessary data from IPEA&#39;s API
## ...

## [1]  2.759569  5.484001  8.193400 10.863809 13.464326
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;combinando-o-deflatebr-com-o-tidyverse&#34;&gt;Combinando o deflateBR com o tidyverse&lt;/h3&gt;
&lt;p&gt;Para quem usa o conjunto de pacotes contidos no &lt;code&gt;tidyverse&lt;/code&gt;, a função
&lt;code&gt;deflate&lt;/code&gt; pode ser usada dentro de &lt;code&gt;mutate()&lt;/code&gt; ou similares. Adaptando o
exemplo anterior:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(tidyverse)

dados %&amp;gt;%
  mutate(reais_deflacionados = deflate(reais, datas, &amp;quot;01/2017&amp;quot;, &amp;quot;ipc&amp;quot;))
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
## Downloading necessary data from IPEA&#39;s API
## ...

##   reais      datas reais_deflacionados
## 1     1 2001-01-01            2.759569
## 2     2 2001-02-01            5.484001
## 3     3 2001-03-01            8.193400
## 4     4 2001-04-01           10.863809
## 5     5 2001-05-01           13.464326
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;outras-funções&#34;&gt;Outras funções&lt;/h3&gt;
&lt;p&gt;Para facilitar o uso de cada um dos cinco índices de preços, também
incluí no pacote &lt;code&gt;deflateBR&lt;/code&gt; cinco funções auxiliares. Em vez de usar a
função &lt;code&gt;deflate&lt;/code&gt; com o argumento &lt;code&gt;index = &amp;quot;ipca&amp;quot;&lt;/code&gt; para deflacionar pelo
IPCA, é possível fazer isso:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;ipca(dados$reais, dados$datas, &amp;quot;01/2017&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
## Downloading necessary data from IPEA&#39;s API
## ...

## [1]  2.847600  5.662908  8.455458 11.231286 13.958171
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ou, para usar o IGP-DI, o seguinte:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;igpdi(dados$reais, dados$datas, &amp;quot;01/2017&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
## Downloading necessary data from IPEA&#39;s API
## ...

## [1]  3.385977  6.738949 10.074312 13.325380 16.471004
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Por fim, o pacote &lt;code&gt;deflateBR&lt;/code&gt; também contém uma função simples, chamada
&lt;code&gt;inflation&lt;/code&gt;, para identificar a variação percentual na inflação entre
dois períodos. Se quisermos saber qual foi a taxa de inflação em 2017
segundo o IPCA, por exemplo, basta rodar:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;inflation(&amp;quot;01/2017&amp;quot;, &amp;quot;12/2017&amp;quot;, &amp;quot;ipca&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
## Downloading necessary data from IPEA&#39;s API
## ...

## [1] 2.947421
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Como o resultado está em percentual, podemos dizer que a taxa de
inflação em 2017, medida pelo IPCA, foi de 2.95%, &lt;a href=&#34;http://agenciabrasil.ebc.com.br/economia/noticia/2018-01/inflacao-oficial-pelo-ipca-em-2017-e-de-295-menor-taxa-desde-1998&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;conforme também
reportado oficialmente pelo
IBGE&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&#34;exemplo-de-aplicação-1-o-valor-do-salário-mínimo&#34;&gt;Exemplo de aplicação 1: o valor do salário mínimo&lt;/h3&gt;
&lt;p&gt;Deflacionar séries é útil para ver como o poder de compra de salários ou
outros variam ao longo do tempo. O salário mínimo, por exemplo, cresceu
ou não acima da inflação? É possível responder a essa pergunta ajustando
os salários nominais em cada período específico com um índice de preços,
como o IPCA. Fazendo isso com o pacote &lt;code&gt;deflateBR&lt;/code&gt;, podemos ver que o
mínimo realmente cresceu acima da inflação desde
1995.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.femeireles.com/figs/salario_minimo-1.png&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;exemplo-de-aplicação-2-o-valor-de-bolsas-de-pós-graduação&#34;&gt;Exemplo de aplicação 2: o valor de bolsas de pós-graduação&lt;/h3&gt;
&lt;p&gt;Um bom exemplo de categoria que não teve aumento de renda acima da
inflação de 1995 a 2018 foram pós-graduandos que recebem bolsas de
estudos da Capes. Fixadas há anos nos mesmos patamares – R$ 2200 para
Doutorado, R$ 1500 para Mestrado –, a inflação não reposta se reflete em
perda de poder de compra da categoria.[1] Como dá pra ver, o valor dos
benefícios, hoje, praticamente voltaram aos patamares do início do
primeiro governo
Lula.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.femeireles.com/figs/bolsa_capes-1.png&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;validade&#34;&gt;Validade&lt;/h3&gt;
&lt;p&gt;Como já dito, o &lt;code&gt;deflateBR&lt;/code&gt; usa a fórmula convencional para corrigir
valores nominais pela inflação: multiplicá-lo pela razão entre o índice
de preços no período de referência e no período observado, assim como a
&lt;a href=&#34;https://www3.bcb.gov.br/CALCIDADAO/publico/metodologiaCorrigirIndice.do?method=metodologiaCorrigirIndice&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;calculadora disponibilizada pelo Banco
Central&lt;/a&gt;.
Os resultados do pacote e desse serviço, por essa razão, são
iguais.[2]&lt;/p&gt;
&lt;h3 id=&#34;como-instalar&#34;&gt;Como instalar&lt;/h3&gt;
&lt;p&gt;Para instalar a versão disponível no
&lt;a href=&#34;https://cran.r-project.org/package=deflateBR&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CRAN&lt;/a&gt; do pacote, basta
executar o seguinte códido:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;install.packages(&amp;quot;deflateBR&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;final&#34;&gt;Final&lt;/h3&gt;
&lt;p&gt;Como procurei mostrar, o pacote &lt;code&gt;deflateBR&lt;/code&gt; faz rapidamente, e de forma
replicável, correções de valores nominais pela inflação. De qualquer
forma, por ser ainda a primeira versão dele, certamente existem várias
coisas por implementar ou melhorar. Para quem quiser sugerir melhorias
como essas ou outras, o código do pacote está disponível no
&lt;a href=&#34;https://github.com/meirelesff/deflateBR&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitHub&lt;/a&gt;. Críticas e sugestões,
como sempre, são bem-vindos.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Os dados sobre os períodos de ajustes nas bolsas foram retirados
&lt;a href=&#34;https://revistacantareira.files.wordpress.com/2012/09/ultimo-artigo1.pdf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;daqui&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Em todos os testes que realizei, os resultados sempre foram
praticamente idênticos – com algumas diferenças na terceira e,
raramente, na segunda casa decimal, provavelmente por conta de algum
arredondamento realizado pela ferramenta online do BC.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
</description>
    </item>
    
  </channel>
</rss>
